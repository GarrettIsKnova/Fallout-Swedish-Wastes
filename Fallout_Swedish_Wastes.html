<!DOCTYPE html>

<head>
    <title>Fallout: Swedish Wastes</title>
</head>
<html>

<body>
    <image src="" width="400" height="270"></image>
    <p id="output"></p>
    <input id="input" type="text" placeholder="Enter you action...">
    <button id="button">Enter</button>

    <script>
        var map = [];
        map[0] = "Supply Locker";
        map[1] = "Armory";
        map[2] = "Power Plant";
        map[3] = "Bedroom";
        map[4] = "Hallway";
        map[5] = "Hallway 2";
        map[6] = "Night Stand";
        map[7] = "Water Treatment Plant";
        map[8] = "Vault Door";

        var images = [];
        images[0] = "Fallout_Supply_Locker.jpeg";
        images[1] = "Fallout_Armory_Start.jpeg";
        images[2] = "Fallout_Power_Plant.jpeg";
        images[3] = "Fallout_Bedroom_Start.jpeg";
        images[4] = "Fallout_Vault_Hallway.jpeg";
        images[5] = "Fallout_Vault_hallway.jpeg";
        images[6] = "Fallout_Endtable.jpeg";
        images[7] = "Fallout_Water_Treatment.jpeg";
        images[8] = "Fallout_Vault_Door.jpeg";

        var blockedPathMessages = "You can't go that way";

        var mapLocation = 3;

        var playersInput = "";

        var gameMessage = "";

        var actionsIKnow = ["north", "east", "south", "west"];
        var action = "";

        var output = document.querySelector("#output");

        var input = document.querySelector("#input");

        var image = document.querySelector("img");

        var button = document.querySelector("#button");
        button.style.cursor = "pointer";
        button.addEventListener("click", clickHandler, false);

        render();

        function clickHandler() {

            playGame();

        }

        function playGame() {
            playersInput = input.value;
            playersInput = playersInput.toLowerCase();

            gameMessage = "";
            action = "";

            for (var i = 0; i < actionsIKnow.length; i++) {
                if (playersInput.indexOf(actionsIKnow[i]) !== -1) {
                    action = actionsIKnow[i];
                    console.log("player's action: " + action);
                    break;
                }
            }

            switch (action) {
                case "north":
                    if (mapLocation >= 3) {
                        mapLocation -= 3;
                    }
                    else {
                        gameMessage = blockedPathMessages;
                    }
                    break;
                case "south":
                    if (mapLocation < 6) {
                        mapLocation += 3;
                    }
                    else {
                        gameMessage = blockedPathMessages;
                    }
                    break;
                case "east":
                   if(mapLocation % 3 != 2)
                {
                    mapLocation += 1;
                }
                else
                {
                    gameMessage = blockedPathMessages;
                }
                break;
                case "west":
                    if(mapLocation % 3 !== 0)
                {
                    mapLocation -= 1;
                }
                else
                {
                    gameMessage = blockedPathMessages;
                }
                break;
                default:
                    gameMessage = "I don't understand that.";
            }
            render();
        }

        function render() {
            output.innerHTML = map[mapLocation];
            image.src = "FSW_Images/" + images[mapLocation];
            output.innerHTML += "<br><em>" + gameMessage + "</em>";

        }
    </script>
</body>

</html>